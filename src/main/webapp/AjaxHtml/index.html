<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bienvenue au TP Chat </title>
    <link href="../resources/css/bootstrap.min.css" rel="stylesheet">
    <link href="../resources/css/style.css" rel="stylesheet">
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-xs-12 col-md-offset-2 col-md-8 col-sm-offset-2 col-sm-8 col-lg-offset-2 col-lg-8" method="POST">
            <div class="image_accueil"><img alt="Image de bienvenue" src="../resources/images/chatimage.png"></div>
            <h2>Bienvenue sur le chat en ligne</h2>
            <div class="input-group">
                <span class="input-group-addon" id="basic-addon1">@</span>
                <input type="text" autofocus class="form-control" placeholder="Pseudo" name="username"
                               aria-describedby="basic-addon1" id="name" required="required">
            </div>
            <div class="input-group">
                        <span class="input-group-addon" id="basic-addon2"><i
                                class="glyphicon glyphicon-home"></i></span>
                <input id="name_salon" type="text" class="form-control" placeholder="salon" name="channel"
                       aria-describedby="basic-addon2"   required="required">
            </div>
            <button type="submit" class="btn btn-primary" onclick="loadXMLDoc()">Se connecter</button>
        </div>
    </div>
</div>
<script type="text/javascript">

    function succes(data) {
        console.log("succes");
        console.log(data);
    }

    function error() {
        console.log("error");
    }

    function loadXMLDoc() {

        // function sendPostRequest(url, params, accept, callback_succes, callback_error, asynchron)
        var params = [];
        params.push({key: "username", value: document.getElementById("name").value});
        params.push({key: "channel", value: document.getElementById("name_salon").value});

        Ajax.sendPostRequest('/chat/back-office/login', params, Ajax.JSON, succes, error, true);
    }
</script>
<script type="text/javascript" src="../resources/js/jquery-3.1.1.min.js"></script>
<script type="text/javascript" src="../resources/js/script.js"></script>
<script type="text/javascript" src="../resources/js/ajax.js"></script>
</body>
</html>